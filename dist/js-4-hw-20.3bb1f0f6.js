async function t(){try{let t=await fetch("http://localhost:3000/blog");return await t.json()}catch(t){return console.error("Помилка отримання постів:",t),[]}}async function e(t){let e={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json; charset=UTF-8"}};return await fetch("http://localhost:3000/blog",e)}async function u(t,e){try{let u={method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"}};await fetch(`http://localhost:3000/blog/${t}`,u)}catch(t){console.error("Помилка оновлення поста:",t)}}async function o(t){try{let e=await fetch(`http://localhost:3000/blog/${t}`,{method:"DELETE"});if(!e.ok)throw Error(`\u{41F}\u{43E}\u{43C}\u{438}\u{43B}\u{43A}\u{430} \u{432}\u{438}\u{434}\u{430}\u{43B}\u{435}\u{43D}\u{43D}\u{44F} \u{43F}\u{43E}\u{441}\u{442}\u{430} \u{437} id ${t}. \u{421}\u{442}\u{430}\u{442}\u{443}\u{441}: ${e.status}`);return console.log(`\u{41F}\u{43E}\u{441}\u{442} \u{437} id ${t} \u{443}\u{441}\u{43F}\u{456}\u{448}\u{43D}\u{43E} \u{432}\u{438}\u{434}\u{430}\u{43B}\u{435}\u{43D}\u{43E}`),!0}catch(t){return console.error("Помилка видалення поста:",t),!1}}async function n(){var e=await t();document.getElementById("postsContainer").innerHTML=e.map(t=>`
    <div class="post">
      <h2>${t.title}</h2>
      <p><strong>\u{410}\u{432}\u{442}\u{43E}\u{440}:</strong> ${t.blogname}</p>
      <img src="${t.image}" alt="${t.title}" style="max-width:300px;">
      <div class="meta">
        <p class="views">\u{41F}\u{435}\u{440}\u{435}\u{433}\u{43B}\u{44F}\u{434}\u{438}: ${t.views}</p>
        <p class="favorites">\u{423}\u{43B}\u{44E}\u{431}\u{43B}\u{435}\u{43D}\u{435}: ${t.favorites}</p>
        <p class="comments">\u{41A}\u{43E}\u{43C}\u{435}\u{43D}\u{442}\u{430}\u{440}\u{456}: ${t.comments}</p>
        <p class="downloads">\u{417}\u{430}\u{432}\u{430}\u{43D}\u{442}\u{430}\u{436}\u{435}\u{43D}\u{43D}\u{44F}: ${t.downloads}</p>
      </div>
      <div class="user">
        <img src="${t.userImageURL}" alt="\u{410}\u{432}\u{430}\u{442}\u{430}\u{440}" style="width:50px; height:50px; border-radius:50%;">
        <p>User ID: ${t.user_id}</p>
      </div>
      <button class="editPostButton" data-id="${t.id}">\u{420}\u{435}\u{434}\u{430}\u{433}\u{443}\u{432}\u{430}\u{442}\u{438}</button>
      <button class="deletePostButton" data-id="${t.id}">\u{412}\u{438}\u{434}\u{430}\u{43B}\u{438}\u{442}\u{438}</button>
    </div>
  `).join("")}n();const r=document.getElementById("createPostForm");r.addEventListener("submit",async t=>{t.preventDefault();let u={title:document.getElementById("titleInput").value.trim(),blogname:document.getElementById("blognameInput").value.trim(),image:document.getElementById("imageInput").value.trim(),userImageURL:document.getElementById("avatarInput").value.trim(),views:Number(document.getElementById("viewsInput").value),favorites:Number(document.getElementById("favoritesInput").value),downloads:Number(document.getElementById("downloadsInput").value),comments:Number(document.getElementById("commentsInput").value),user_id:Number(document.getElementById("userIdInput").value)};await e(u),r.reset(),n()}),document.addEventListener("click",async t=>{let e=t.target;if(e.classList.contains("editPostButton")){let t=e.dataset.id,o=e.parentElement,r={title:prompt("Новий заголовок:",o.querySelector("h2").textContent),blogname:prompt("Ім’я автора:",o.querySelector("p").textContent.split(":")[1].trim()),image:prompt("URL зображення:",o.querySelector("img").src),userImageURL:prompt("URL аватарки:",o.querySelector(".user img").src),views:Number(prompt("Перегляди:",o.querySelector(".views").textContent.replace(/\D/g,""))),favorites:Number(prompt("Улюблене:",o.querySelector(".favorites").textContent.replace(/\D/g,""))),comments:Number(prompt("Коментарі:",o.querySelector(".comments").textContent.replace(/\D/g,""))),downloads:Number(prompt("Завантаження:",o.querySelector(".downloads").textContent.replace(/\D/g,""))),user_id:Number(prompt("ID користувача:",o.querySelector(".user p").textContent.replace(/\D/g,"")))};r.title&&(await u(t,r),n())}if(e.classList.contains("deletePostButton")){let t=e.dataset.id;await o(t),n()}});
//# sourceMappingURL=js-4-hw-20.3bb1f0f6.js.map
